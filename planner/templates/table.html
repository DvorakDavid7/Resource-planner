{% extends "layout.html" %}

{% block content%}
<br>
<div id="set_department">
    <input id="department" type="text" placeholder="Enter Departmet(s)">
    <button onclick="set_department()" type="button">Submit</button>
</div>
<div id="searching">
    <input size="40" id="search" type="text" onkeyup="tableSearch()" placeholder="Search for names..">
</div>
<div id="groups">
    <div class="dropdown">
        <button onclick="dropdown_toggle(); show_groups();" class="dropbtn">Choose group</button>
        <div id="myDropdown" class="dropdown-content">
            <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
            <div class="dropdown_list" id="dropdown">
            </div>
        </div>
    </div>
</div>
<table id="table" border="1">
    <thead>
        <tr>
            <th>Week:</th>
            {% for i in range(table.header.weeks | length) -%}
            <th>
                {{ table.header.weeks[i] | string + ' (' +  table.header.working_hours[table.header.weeks[i]] + ')' }}
            </th>
            {%- endfor %}
        </tr>
        <tr>
            <td>Dates:</td>
            {% for date in table.header.dates -%}
            <td>{{ date }}</td>
            {%- endfor %}
        </tr>
    </thead>

    <tbody>
        {% for i in range(table.body | length) -%}
        <tr>
            {% set weeks_len = table.header.weeks | length %}
            <td class="item_for_search">
                <a href="{{ url_root }}edit/{{ table.body[i].user_id }}?year_start={{ table.header.year_start }}&year_end={{ table.header.year_end }}&week_start={{ table.header.weeks[0] }}&week_end={{ table.header.weeks[weeks_len - 1] }}">
                {{ table.body[i].name + ' (' +  table.body[i].department + ')' }}</a>
            </td>
            {% for week in table.header.weeks%}
            {% set week = week | int %}
                <td class="data">{{ table.body[i]["values"][week] }}</td>
            {% endfor %}
        </tr>
        {%- endfor %}
    </tbody>
</table>
<script>coloring_table({{ table | tojson() }}, 'ddvorak@trask.cz')</script>
{% endblock content%}
